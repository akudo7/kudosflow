{
  "config": {
    "info": {
      "version": "1.0.0",
      "description": "Career counselor workflow with model integration",
      "copyright": "Copyright 2026",
      "author": "Akira Kudo"
    },
    "recursionLimit": 25,
    "eventEmitter": {
      "defaultMaxListeners": 10
    }
  },
  "stateAnnotation": {
    "name": "TestWorkflowState",
    "type": "Annotation.Root"
  },
  "annotation": {
    "messages": {
      "type": "string[]",
      "reducer": "(x, y) => x.concat(y)",
      "default": []
    },
    "userName": {
      "type": "string",
      "reducer": "(x, y) => y || x",
      "default": ""
    },
    "userJob": {
      "type": "string",
      "reducer": "(x, y) => y || x",
      "default": ""
    },
    "advice": {
      "type": "string",
      "reducer": "(x, y) => y || x",
      "default": ""
    }
  },
  "models": [
    {
      "id": "adviceModel",
      "type": "OpenAI",
      "config": {
        "model": "gpt-4o-mini",
        "temperature": 0.7
      },
      "systemPrompt": "You are a career counselor. Based on the user's occupation, provide appropriate advice within 100 characters. Keep it concise and practical."
    }
  ],
  "nodes": [
    {
      "id": "askName",
      "handler": {
        "parameters": [
          {
            "name": "state",
            "parameterType": "state",
            "stateType": "typeof TestWorkflowState.State"
          }
        ],
        "function": "const userInput = interrupt('What is your name?');\n\nif (!userInput) {\n  return {\n    messages: ['Name was not entered'],\n    userName: ''\n  };\n}\n\nconst userName = String(userInput).trim();\nconst result = {\n  messages: [`Hello ${userName}!`],\n  userName: userName\n};\n\nreturn result;"
      }
    },
    {
      "id": "askJob",
      "handler": {
        "parameters": [
          {
            "name": "state",
            "parameterType": "state",
            "stateType": "typeof TestWorkflowState.State"
          }
        ],
        "function": "const userInput = interrupt('What is your occupation?');\n\nif (!userInput) {\n  return {\n    messages: ['Occupation was not entered'],\n    userJob: ''\n  };\n}\n\nconst userJob = String(userInput).trim();\nconst result = {\n  messages: [`Occupation: ${userJob} received. Generating advice...`],\n  userJob: userJob\n};\n\nreturn result;"
      }
    },
    {
      "id": "generateAdvice",
      "handler": {
        "parameters": [
          {
            "name": "state",
            "parameterType": "state",
            "stateType": "typeof TestWorkflowState.State"
          },
          {
            "name": "model",
            "parameterType": "model",
            "modelRef": "adviceModel"
          }
        ],
        "function": "try {\n  console.log('üîç Generating advice based on occupation...');\n  console.log('üë§ Name:', state.userName);\n  console.log('üíº Occupation:', state.userJob);\n\n  if (!state.userJob || state.userJob === '') {\n    return {\n      messages: ['Cannot generate advice because occupation is not set'],\n      advice: ''\n    };\n  }\n\n  const prompt = `Provide practical advice within 100 characters for ${state.userName} working as a ${state.userJob} to help with career advancement and improving work quality.`;\n\n  const response = await model.invoke([{ role: 'user', content: prompt }]);\n\n  const adviceText = response.content || 'Failed to generate advice';\n  \n  console.log('üìã Generated advice:', adviceText);\n\n  return {\n    messages: [`Advice generated`],\n    advice: adviceText\n  };\n} catch (error) {\n  console.error('‚ùå Error:', error);\n  return {\n    messages: [`An error occurred: ${error.message}`],\n    advice: ''\n  };\n}"
      }
    },
    {
      "id": "showResult",
      "handler": {
        "parameters": [
          {
            "name": "state",
            "parameterType": "state",
            "stateType": "typeof TestWorkflowState.State"
          }
        ],
        "function": "const adviceMessage = `[Advice for ${state.userName} (${state.userJob})]\\n\\n${state.advice}`;\n\ninterrupt(adviceMessage);\n\nconsole.log('üîç Final result:', adviceMessage);\n\nreturn {\n  messages: [adviceMessage, 'Process completed']\n};"
      }
    }
  ],
  "edges": [
    {
      "from": "__start__",
      "to": "askName"
    },
    {
      "from": "askName",
      "to": "askJob"
    },
    {
      "from": "askJob",
      "to": "generateAdvice"
    },
    {
      "from": "generateAdvice",
      "to": "showResult"
    },
    {
      "from": "showResult",
      "to": "__end__"
    }
  ],
  "stateGraph": {
    "annotationRef": "TestWorkflowState",
    "config": {
      "checkpointer": {
        "type": "MemorySaver"
      }
    }
  }
}